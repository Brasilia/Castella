/* 
File:   main.cpp
Author: marcius

sudo apt-get install lua.5.2 libreadline-dev

baixar o pacote http://www.lua.org/ftp/lua-5.2.2.tar.gz

entrar na pasta descompactada
make <dist> ex:make linux

sudo make linux install

para testar realize
meke test
devera aparece a vers√£o

agora para o seu projeto vc devera copiar os seguintes arquivos para o seu projeto
bin:
	lua
	luac
include:
	luaxlib.h
	lua.h
	luaconf.h
	lualib.h
	lua.hpp

agora vc deve incluir a biblioteca liblua.a
e fazer o link -llua

exemplo de main.cpp:


 
 Created on 22 de Agosto de 2013, 14:11
 */

#include <stdio.h>
#include <iostream>

extern "C" {
	#include "lua.h"
	#include "lualib.h"
	#include "lauxlib.h"
};

/* the Lua interpreter */
lua_State* L;

static int average(lua_State *L)
{
	/* get number of arguments */
	int n = lua_gettop(L);
	double sum = 0;
	int i;

	/* loop through each argument */
	for (i = 1; i <= n; i++)
	{
		/* total the arguments */
		sum += lua_tonumber(L, i);
	}

	/* push the average */
	lua_pushnumber(L, sum / n);

	/* push the sum */
	lua_pushnumber(L, sum);

	/* return the number of results */
	return 2;
}

int main ( int argc, char *argv[] )
{
	/* initialize Lua */
	L = luaL_newstate();

	/* load Lua base libraries */
	luaL_openlibs(L);

	/* register our function */
	lua_register(L, "average", average);

	/* run the script */
	luaL_dofile(L, "avg.lua");

	/* pause */
	printf( "Press enter to exit..." );
	getchar();
        
        /* cleanup Lua */
	lua_close(L);

	return 0;
}



